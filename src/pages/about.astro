---
import Layout from '../layouts/layout.astro';
import { getCollection, type CollectionEntry } from 'astro:content';

// Type pour les entrées de collection
type PageEntry = CollectionEntry<'pages'>;

// Récupérer la page "À propos"
const aboutPagesCollection = await getCollection('pages');
const aboutPages = aboutPagesCollection.filter((entry: PageEntry) => 
  entry.data.title === "À propos de Briec2000"
);

const aboutPage = aboutPages.length > 0 ? aboutPages[0] : null;

// Convertir le contenu Markdown en HTML si aboutPage existe
const contentRender = aboutPage ? await aboutPage.render() : null;
const Content = contentRender ? contentRender.Content : null;
---

<Layout title={aboutPage ? aboutPage.data.title : "À propos - Briec2000"}>
  <section>
    {Content ? (
      <div class="about-content">
        <Content />
      </div>
    ) : (
      <div>
        <h1 class="mb-8">À propos de Briec2000</h1>
        
        <p class="text-lg mb-6">
          Briec2000 est une association locale basée à Briec-de-l'Odet (29510) qui organise 
          des événements communautaires et culturels depuis 2018.
        </p>
        
        <div class="mb-10">
          <h2 class="mb-6 border-b pb-2">Notre mission</h2>
          <p class="mb-4">
            Nous avons pour mission de créer des liens entre les habitants de Briec et des environs 
            à travers des événements inclusifs, créatifs et solidaires.
          </p>
          <p>
            Notre objectif est de rendre la culture accessible à tous et de développer un sentiment 
            d'appartenance à la communauté locale.
          </p>
        </div>
        
        <div class="mb-10">
          <h2 class="mb-6 border-b pb-2">Nos activités</h2>
          <p class="mb-2"><strong>Cantines solidaires :</strong></p>
          <p class="mb-4">
            Chaque premier dimanche du mois, nous proposons une cantine solidaire à Ti Glazik. 
            Les fonds collectés financent nos projets communautaires.
          </p>
        </div>
      </div>
    )}
    
    <div class="text-center mt-12">
      <a href="/" class="btn">Retour à l'accueil</a>
    </div>
  </section>
</Layout>

<style>
  /* Styles spécifiques pour le contenu Markdown rendu */
  .about-content :global(h1) {
    margin-bottom: 2rem;
  }
  
  .about-content :global(h2) {
    margin-top: 2.5rem;
    margin-bottom: 1.5rem;
    padding-bottom: 0.5rem;
    border-bottom: 1px solid #e5e7eb;
  }
  
  .about-content :global(h3) {
    margin-top: 1.5rem;
    margin-bottom: 0.75rem;
    font-weight: 500;
  }
  
  .about-content :global(p) {
    margin-bottom: 1rem;
  }
  
  .about-content :global(ul) {
    margin-left: 1.5rem;
    margin-bottom: 1.5rem;
    list-style-type: disc;
  }
  
  .about-content :global(li) {
    margin-bottom: 0.5rem;
  }
  
  .about-content :global(strong) {
    font-weight: 600;
  }
  
  .about-content :global(em) {
    font-style: italic;
  }
</style>